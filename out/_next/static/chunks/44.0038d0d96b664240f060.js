(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[44],{44:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return S}});var n=a(5944),r=a(9444),o=a(537),i=a(3640),d=a(3064),u=a(5779);var l={config:{},init:function(e){e.tooltip((new d.RW).call)},view:{renderer:"canvas"}};o.z2l(r,i,l);var s=function(e){var t=e.dataSet,a=(e.options,t.p),n=o.Uk0().encodings("x"),r=o.x().yearmonth("date"),i=a.filter((function(e){return"Subject-Suspect"===e.type})).derive({month:function(e){return u.op.utcmonth(e.date)},is_male:function(e){return"Male"===e.gender},is_female:function(e){return"Female"===e.gender}}).groupby(["month","year"]).rollup({female_pctg:function(e){return 100*u.op.sum(e.is_female)/(u.op.sum(e.is_female)+u.op.sum(e.is_male))},male_pctg:function(e){return 100*u.op.sum(e.is_male)/(u.op.sum(e.is_female)+u.op.sum(e.is_male))},date:function(e){return u.op.min(u.op.utcdatetime(e.date))}}).derive({date:function(e){return u.op.datetime(e.year,e.month)}}).rename({male_pctg:"male",female_pctg:"female"}).fold(["female","male"]).rename({key:"gender"}),d=a.filter((function(e){return"Subject-Suspect"===e.type})).derive({month:function(e){return u.op.utcmonth(e.date)},is_male:function(e){return"Male"===e.gender},is_female:function(e){return"Female"===e.gender}}).groupby(["month","year"]).rollup({female_count:function(e){return u.op.sum(e.is_female)},male_count:function(e){return u.op.sum(e.is_male)},date:function(e){return u.op.min(u.op.utcdatetime(e.date))}}).derive({date:function(e){return u.op.datetime(e.year,e.month)}}).rename({male_count:"male",female_count:"female"}).fold(["female","male"]).rename({key:"gender"});return o.H7P(o.b59({opacity:.5}).data(d).encode(r,o.y().fieldQ("value").title("Number of perpetrators"),o.$_Y().fieldN("gender").scale({scheme:"set1"})).params(n),o.b59({opacity:.5}).data(i).encode(r,o.y().fieldQ("value").title("Percentage of perpetrators"),o.$_Y().fieldN("gender").scale({scheme:"set1"})).encode(r.scale({domain:n})))};var c={config:{},init:function(e){e.tooltip((new d.RW).call)},view:{renderer:"canvas"}};o.z2l(r,i,c);var m=function(e){var t=e.dataSet,a=e.options,n=t.pst,r=a.field,i=a.yearStart,d=a.yearEnd,u=a.scheme;return o.HG8().data(n).transform(o.hXT('datum["year"] >= '+i+' && datum["year"] <= '+d)).encode(o.y().fieldN("state").sort(o.J69(r).order("descending")).title("State"),o.$_Y().mean(r).scale({scheme:u}),o.MdO([o.tvR("state"),o.J69(r)]))};var f={config:{},init:function(e){e.tooltip((new d.RW).call)},view:{renderer:"canvas"}};o.z2l(r,i,f);var p=function(e){var t=e.dataSet,a=e.options,n=a.field,r=a.yearStart,i=a.yearEnd,d=a.scheme,u=t.pst,l=t.usa,s=t.ppst;return o.aTG(u).layer(o._fs({fill:"#ddd",stroke:"#fff",strokeWidth:1}).data(o.t_h(l).feature("states")).transform(o.P58("id").from(o.aTG(s).key("fip").fields("state"))).encode(o.MdO("state")),o.y$q({stroke:"#5e5e5e"}).data(u).transform(o.hXT('datum["year"] >= '+r+' && datum["year"] <= '+i),o.tqE("state").aggregate(o.J69("mean_age").as("mean_age"),o.J69("underages_ratio").as("underages_ratio"),o.J69("perpetrators_per_1M").as("perpetrators_per_1M"),o.J69("latitude").as("latitude"),o.J69("longitude").as("longitude"))).encode(o.pqJ().fieldQ("latitude"),o.MSO().fieldQ("longitude"),o.$_Y().mean(n).legend({titleLineHeight:10}).scale({scheme:d}).title({mean_age:"Perpetrators mean age",underages_ratio:["Ratio of underage/total","perpetrators"]}[n]),o.dpJ().mean("perpetrators_per_1M").title(["Perpetrators per","1M population"]),o.MdO([o.tvR("state"),o.xiU(n),o.xiU("perpetrators_per_1M")]))).project(o.CJN("albersUsa"))};var g={config:{},init:function(e){e.tooltip((new d.RW).call)},view:{renderer:"canvas"}};o.z2l(r,i,g);var _=function(e){var t=e.dataSet,a=e.options;return o.H7P(m({dataSet:t,options:a}).height(500),p({dataSet:t,options:a}).height(500).width(720)).config({scale:{maxSize:1500},view:{stroke:null}})},h=a(7294),v=a(1950),y=function(e){var t=e.func,a=e.name,u=(e.width,e.height,e.options),l=(0,v.Z)((function(e){return e.dataset})),s={config:{},init:function(e){e.tooltip((new d.RW).call)},view:{renderer:"canvas"}};return o.z2l(r,i,s),(0,h.useEffect)((function(){t({dataSet:l,options:u}).render().then((function(e){document.getElementById(a).appendChild(e)}))}),[]),(0,n.tZ)("div",{id:a})},S=function(){return(0,n.BX)("main",{children:[(0,n.tZ)("section",{children:(0,n.tZ)(y,{func:s,name:"perpetratorsByGender"})}),(0,n.tZ)("section",{children:(0,n.tZ)(y,{func:_,name:"mapMeanAgeOfPerpetrators",options:{field:"mean_age",yearStart:2013,yearEnd:2018,schema:"goldred"}})})]})}}}]);