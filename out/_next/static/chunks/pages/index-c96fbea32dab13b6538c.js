(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{6480:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return O}});var r=n(5944),a=n(3843),o=n(1950),i=n(7294),s=n(9444),u=n(537),c=n(3640),l=n(3064),f=n(5779);var d={config:{},init:function(e){e.tooltip((new l.RW).call)},view:{renderer:"canvas"}};u.z2l(s,c,d);var p=function(e){var t=e.dataSet,n=(e.options,t.p),r=u.Uk0().encodings("x"),a=u.x().yearmonth("date"),o=n.filter((function(e){return"Subject-Suspect"===e.type})).derive({month:function(e){return f.op.utcmonth(e.date)},is_male:function(e){return"Male"===e.gender},is_female:function(e){return"Female"===e.gender}}).groupby(["month","year"]).rollup({female_pctg:function(e){return 100*f.op.sum(e.is_female)/(f.op.sum(e.is_female)+f.op.sum(e.is_male))},male_pctg:function(e){return 100*f.op.sum(e.is_male)/(f.op.sum(e.is_female)+f.op.sum(e.is_male))},date:function(e){return f.op.min(f.op.utcdatetime(e.date))}}).derive({date:function(e){return f.op.datetime(e.year,e.month)}}).rename({male_pctg:"male",female_pctg:"female"}).fold(["female","male"]).rename({key:"gender"}),i=n.filter((function(e){return"Subject-Suspect"===e.type})).derive({month:function(e){return f.op.utcmonth(e.date)},is_male:function(e){return"Male"===e.gender},is_female:function(e){return"Female"===e.gender}}).groupby(["month","year"]).rollup({female_count:function(e){return f.op.sum(e.is_female)},male_count:function(e){return f.op.sum(e.is_male)},date:function(e){return f.op.min(f.op.utcdatetime(e.date))}}).derive({date:function(e){return f.op.datetime(e.year,e.month)}}).rename({male_count:"male",female_count:"female"}).fold(["female","male"]).rename({key:"gender"});return u.H7P(u.b59({opacity:.5}).data(i).encode(a,u.y().fieldQ("value").title("Number of perpetrators"),u.$_Y().fieldN("gender").scale({scheme:"set1"})).params(r),u.b59({opacity:.5}).data(o).encode(a,u.y().fieldQ("value").title("Percentage of perpetrators"),u.$_Y().fieldN("gender").scale({scheme:"set1"})).encode(a.scale({domain:r})))};var m={config:{},init:function(e){e.tooltip((new l.RW).call)},view:{renderer:"canvas"}};u.z2l(s,c,m);var g=function(e){var t=e.dataSet,n=e.options,r=t.pst,a=n.field,o=n.yearStart,i=n.yearEnd,s=n.scheme;return u.HG8().data(r).transform(u.hXT('datum["year"] >= '+o+' && datum["year"] <= '+i)).encode(u.y().fieldN("state").sort(u.J69(a).order("descending")).title("State"),u.$_Y().mean(a).scale({scheme:s}),u.MdO([u.tvR("state"),u.J69(a)]))};var h={config:{},init:function(e){e.tooltip((new l.RW).call)},view:{renderer:"canvas"}};u.z2l(s,c,h);var y=function(e){var t=e.dataSet,n=e.options,r=n.field,a=n.yearStart,o=n.yearEnd,i=n.scheme,s=t.pst,c=t.usa,l=t.ppst;return u.aTG(s).layer(u._fs({fill:"#ddd",stroke:"#fff",strokeWidth:1}).data(u.t_h(c).feature("states")).transform(u.P58("id").from(u.aTG(l).key("fip").fields("state"))).encode(u.MdO("state")),u.y$q({stroke:"#5e5e5e"}).data(s).transform(u.hXT('datum["year"] >= '+a+' && datum["year"] <= '+o),u.tqE("state").aggregate(u.J69("mean_age").as("mean_age"),u.J69("underages_ratio").as("underages_ratio"),u.J69("perpetrators_per_1M").as("perpetrators_per_1M"),u.J69("latitude").as("latitude"),u.J69("longitude").as("longitude"))).encode(u.pqJ().fieldQ("latitude"),u.MSO().fieldQ("longitude"),u.$_Y().mean(r).legend({titleLineHeight:10}).scale({scheme:i}).title({mean_age:"Perpetrators mean age",underages_ratio:["Ratio of underage/total","perpetrators"]}[r]),u.dpJ().mean("perpetrators_per_1M").title(["Perpetrators per","1M population"]),u.MdO([u.tvR("state"),u.xiU(r),u.xiU("perpetrators_per_1M")]))).project(u.CJN("albersUsa"))};var v={config:{},init:function(e){e.tooltip((new l.RW).call)},view:{renderer:"canvas"}};u.z2l(s,c,v);var _=function(e){var t=e.dataSet,n=e.options;return u.H7P(g({dataSet:t,options:n}).height(500),y({dataSet:t,options:n}).height(500).width(720)).config({scale:{maxSize:1500},view:{stroke:null}})};var b=(0,n(5152).default)((function(){return n.e(808).then(n.bind(n,4808))}),{loadableGenerated:{webpack:function(){return[4808]},modules:["index.js -> ../components/VegaComp"]}}),w={name:"7dlj0d",styles:"width:100vw;height:100vh;display:flex;flex-direction:column;align-items:center;justify-content:center"},S={name:"1n9bfnh",styles:"padding-top:16rem"},j={name:"czikf7",styles:'font-size:1.5rem;line-height:2rem;font-family:ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji"'},O=function(){var e=(0,o.Z)((function(e){return e.dataset})),t=(0,o.Z)((function(e){return e.loadDataSet})),n=(0,o.Z)((function(e){return e.loadjson}));return console.log(e),(0,i.useEffect)((function(){t("p"),t("ppst"),n("usa")}),[]),e.p&&e.usa&&e.ppst?(0,r.BX)("main",{children:[(0,r.tZ)("section",{children:(0,r.tZ)(b,{func:p,name:"perpetratorsByGender"})}),(0,r.tZ)("section",{children:(0,r.tZ)(b,{func:_,name:"mapMeanAgeOfPerpetrators",options:{field:"mean_age",yearStart:2013,yearEnd:2018,schema:"goldred"}})})]}):(0,r.BX)("main",{css:w,children:[(0,r.tZ)("section",{children:(0,r.tZ)(a.X1,{size:"large"})}),(0,r.tZ)("section",{css:S,children:(0,r.tZ)("h1",{css:j,children:"We are loading necessary files"})})]})}},1950:function(e,t,n){"use strict";var r=n(6265),a=n(4671),o=n(5779);function i(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,u=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){u=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(u)throw o}}}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var l={p:"https://raw.githubusercontent.com/cse412-21sp/us-gun-violence/main/data/perpetrators.csv",g:"https://raw.githubusercontent.com/cse412-21sp/us-gun-violence/main/data/guns.csv",pst:"https://raw.githubusercontent.com/cse412-21sp/us-gun-violence/main/data/perpetrators_by_state.csv",stp:"https://raw.githubusercontent.com/cse412-21sp/us-gun-violence/main/data/state_pop.csv",stf:"https://raw.githubusercontent.com/cse412-21sp/us-gun-violence/main/data/state_fips.csv",ppst:"https://raw.githubusercontent.com/cse412-21sp/us-gun-violence/main/data/perpetrators_by_state.csv"},f={usa:"https://raw.githubusercontent.com/vega/vega-datasets/master/data/us-10m.json"},d=(0,a.Z)((function(e,t){return{dataset:{},loadDataSet:function(n){fetch(l[n]).then((function(e){return e.text()})).then((function(a){var i=t().dataset;a=(0,o.CO)(a),e({dataset:c(c({},i),{},(0,r.Z)({},n,a))})}))},loadDataSets:function(e){var n,r=i(e);try{for(r.s();!(n=r.n()).done;){var a=n.value;t().loadDataSet(a)}}catch(o){r.e(o)}finally{r.f()}},loadjson:function(n){fetch(f[n]).then((function(e){return e.json()})).then((function(a){var o=t().dataset;e({dataset:c(c({},o),{},(0,r.Z)({},n,a))})}))}}}));t.Z=d},8581:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(6480)}])}},function(e){e.O(0,[774,880,187,888,179],(function(){return t=8581,e(e.s=t);var t}));var t=e.O();_N_E=t}]);